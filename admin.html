<!DOCTYPE html><html>
<head>
    <title>ComHash Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"><style>
    body { font-family: Arial; background:#0e0e0e; color:white; margin:0; }
    .login-box { max-width:320px; margin:120px auto; background:#1b1b1b; padding:25px; border-radius:10px; }
    input { width:100%; padding:10px; margin:10px 0; border:none; border-radius:6px; background:#242424; color:white; }
    button { width:100%; padding:12px; border:none; border-radius:6px; background:#00c853; font-size:16px; color:white; cursor:pointer; }
    button:hover { background:#00e676; }
    .container { padding:20px; }
    .card { background:#1a1a1a; padding:15px; margin-bottom:15px; border-radius:10px; }
    .flex { display:flex; justify-content:space-between; align-items:center; }
    .user-box { padding:10px; background:#111; margin:5px 0; border-radius:6px; }
    .btn-small { padding:5px 10px; background:#00c853; border:none; border-radius:5px; color:white; cursor:pointer; }
</style>

</head><body><!-- LOGIN SCREEN --><div id="loginScreen" class="login-box">
    <h2>Admin Login</h2>
    <input id="adminPass" type="password" placeholder="Password">
    <button onclick="adminLogin()">Login</button>
</div><!-- DASHBOARD --><div id="dashboard" style="display:none;" class="container">
    <h2>ComHash Admin</h2><div class="card">
    <h3>User Search</h3>
    <input id="searchInput" placeholder="Enter Telegram ID">
    <button onclick="searchUser()">Search</button>
    <div id="searchResult"></div>
</div>

<div class="card">
    <h3>Top Users (Leaderboard)</h3>
    <div id="leaderboard"></div>
</div>

</div><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script><script>
// SIMPLE PASSWORD
const ADMIN_PASSWORD = "Arshad@123";

function adminLogin() {
    const pass = document.getElementById("adminPass").value;
    if(pass === ADMIN_PASSWORD) {
        document.getElementById("loginScreen").style.display = "none";
        document.getElementById("dashboard").style.display = "block";
        loadLeaderboard();
    } else {
        alert("Wrong Password");
    }
}

// FIREBASE CONFIG — REPLACE YOURS
const firebaseConfig = {
  apiKey: "",
  authDomain: "",
  databaseURL: "",
  projectId: "",
  storageBucket: "",
  messagingSenderId: "",
  appId: ""
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// SEARCH USER
function searchUser() {
    const id = document.getElementById("searchInput").value;
    if(!id) return;

    db.ref("users/" + id).once("value", snap => {
        if(!snap.exists()) {
            document.getElementById("searchResult").innerHTML = "User not found";
            return;
        }

        const user = snap.val();
        document.getElementById("searchResult").innerHTML = `
            <div class='user-box'>
                <b>ID:</b> ${id}<br>
                <b>Balance:</b> ${user.balance || 0}<br>
                <b>Score:</b> ${user.score || 0}<br>
                <button class='btn-small' onclick="updateBalance('${id}')">+100 Tokens</button>
            </div>
        `;
    });
}

// UPDATE USER BALANCE
function updateBalance(uid) {
    db.ref("users/" + uid + "/balance").transaction(b => (b||0) + 100);
    alert("Added 100 tokens");
}

// LOAD LEADERBOARD
function loadLeaderboard() {
    db.ref("users").orderByChild("score").limitToLast(50).on("value", snap => {
        let arr = [];
        snap.forEach(s => arr.push({ id:s.key, ...s.val() }));
        arr.reverse();

        let html = "";
        arr.forEach(u => {
            html += `<div class='user-box'>${u.id} — <b>${u.score||0}</b></div>`;
        });

        document.getElementById("leaderboard").innerHTML = html;
    });
}
</script></body>
</html>
