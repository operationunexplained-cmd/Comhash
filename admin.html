<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel - Hacker Tapper</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #0a0a0a;
    color: #00eaff;
    padding: 20px;
}
.container {
    max-width: 800px;
    margin: auto;
}
input, button {
    padding: 10px;
    margin: 5px 0;
    width: 100%;
    font-size: 15px;
    border-radius: 6px;
}
button {
    background: #00eaff;
    color: #000;
    cursor: pointer;
    font-weight: bold;
}
.user-box {
    background: #111;
    padding: 15px;
    margin-top: 10px;
    border: 1px solid #00eaff;
    border-radius: 6px;
}
</style>
</head>

<body>
<div class="container">

<h2>Admin Login</h2>

<div id="loginBox">
    <input id="adminPass" type="password" placeholder="Enter Admin Password">
    <button onclick="adminLogin()">Login</button>
</div>

<div id="adminPanel" style="display:none;">

    <h2>ðŸ”§ Admin Panel</h2>

    <button onclick="loadUsers()">Load All Users</button>

    <input id="searchId" placeholder="Search by User ID (5516578535)">
    <button onclick="searchUser()">Search</button>

    <div id="usersList"></div>
</div>

</div>

<!-- Firebase SDK v8 (Telegram Compatible) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
// YOUR FIREBASE CONFIG
const firebaseConfig = {
    apiKey: "AIzaSyBDovmAk88JUEjeY35T-3eIta1igiE5fQ0",
    authDomain: "comhashgame.firebaseapp.com",
    databaseURL: "https://comhashgame-default-rtdb.firebaseio.com",
    projectId: "comhashgame",
    storageBucket: "comhashgame.firebasestorage.app",
    messagingSenderId: "392187080052",
    appId: "1:392187080052:web:3e31391442ca1315dc1021",
    measurementId: "G-0YWTXYJ7RN"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();


// SIMPLE HARD-CODED PASSWORD (CHANGE IT!!)
const ADMIN_PASSWORD = "arshadirfan123";

function adminLogin() {
    const pass = document.getElementById("adminPass").value.trim();

    if (pass !== ADMIN_PASSWORD) {
        alert("Wrong password!");
        return;
    }

    document.getElementById("loginBox").style.display = "none";
    document.getElementById("adminPanel").style.display = "block";
}



// LOAD ALL USERS
function loadUsers() {
    const list = document.getElementById("usersList");
    list.innerHTML = "Loading...";

    db.ref("users").once("value", snap => {
        const data = snap.val();
        if (!data) {
            list.innerHTML = "No users found.";
            return;
        }

        list.innerHTML = "";

        Object.keys(data).forEach(id => {
            const u = data[id];
            list.innerHTML += renderUserBox(id, u);
        });
    });
}



// SEARCH USER BY ID
function searchUser() {
    const id = document.getElementById("searchId").value.trim();
    if (id.length === 0) return;

    const list = document.getElementById("usersList");
    list.innerHTML = "Searching...";

    db.ref("users/" + id).once("value", snap => {
        if (!snap.exists()) {
            list.innerHTML = "User not found.";
            return;
        }
        list.innerHTML = renderUserBox(id, snap.val());
    });
}



// RENDER USER BOX HTML
function renderUserBox(id, u) {
    return `
    <div class="user-box">
        <b>ID:</b> ${id}<br>
        <b>Username:</b> ${u.username || "-"}<br>
        <b>Coins:</b> ${u.coins}<br>
        <b>Score:</b> ${u.score}<br>
        <b>Taps:</b> ${u.taps}<br>
        <b>Booster:</b> ${u.booster}<br>
        <b>Referred By:</b> ${u.referredBy || "-"}<br><br>

        <input id="coins_${id}" type="number" placeholder="Set Coins" value="${u.coins}">
        <button onclick="updateCoins('${id}')">Update Coins</button>

        <input id="score_${id}" type="number" placeholder="Set Score" value="${u.score}">
        <button onclick="updateScore('${id}')">Update Score</button>

        <button onclick="resetTaps('${id}')">Reset Taps</button>
        <button style="background:red;color:white;" onclick="deleteUser('${id}')">Delete User</button>
    </div>
    `;
}



// UPDATE COINS
function updateCoins(id) {
    const val = parseInt(document.getElementById("coins_" + id).value);
    db.ref("users/" + id).update({ coins: val });
    alert("Coins updated");
}



// UPDATE SCORE
function updateScore(id) {
    const val = parseInt(document.getElementById("score_" + id).value);
    db.ref("users/" + id).update({ score: val });
    alert("Score updated");
}



// RESET TAPS
function resetTaps(id) {
    db.ref("users/" + id).update({ taps: 0 });
    alert("Taps reset");
}



// DELETE USER
function deleteUser(id) {
    if (!confirm("Delete this user?")) return;
    db.ref("users/" + id).remove();
    alert("User deleted");
}
</script>

</body>
</html>
