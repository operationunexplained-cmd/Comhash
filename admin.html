<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    input, button { padding: 10px; margin: 5px 0; width: 100%; }
    #output { white-space: pre; background:#eee; padding:15px; margin-top:10px; border-radius:5px; }
    #panel { display:none; }
  </style>
</head>
<body>

<h2>Admin Panel</h2>

<input id="adminPass" type="password" placeholder="Enter admin password">
<button onclick="login()">Login</button>

<div id="panel">
  <h3>Load Users</h3>
  <input id="dbPath" placeholder="Enter DB path (default: users)" value="users">
  <button onclick="loadUsers()">Load All Users</button>

  <h3>Add Coins</h3>
  <input id="uid" placeholder="Telegram ID (e.g., 5516578535)">
  <input id="addAmount" type="number" placeholder="Amount to add">
  <button onclick="addCoins()">Add Coins</button>

  <div id="output">Waiting...</div>
</div>

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
// ==============================
// FIREBASE CONFIG
// ==============================
const firebaseConfig = {
  apiKey: "AIzaSyBDovmAk88JUEjeY35T-3eIta1igiE5fQ0",
  authDomain: "comhashgame.firebaseapp.com",
  databaseURL: "https://comhashgame-default-rtdb.firebaseio.com",
  projectId: "comhashgame",
  storageBucket: "comhashgame.firebasestorage.app",
  messagingSenderId: "392187080052",
  appId: "1:392187080052:web:3e31391442ca1315dc1021",
  measurementId: "G-0YWTXYJ7RN"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ==============================
// ADMIN LOGIN (HTML ONLY)
// ==============================
const ADMIN_PASSWORD = "superadmin123";

function login() {
  const pass = document.getElementById("adminPass").value;
  if (pass !== ADMIN_PASSWORD) return alert("Wrong password");
  document.getElementById("panel").style.display = "block";
}

// ==============================
// LOAD ANY PATH
// ==============================
function loadUsers() {
  const path = document.getElementById("dbPath").value.trim();
  if (!path) return alert("Enter database path");

  document.getElementById("output").textContent = "Loading...";

  db.ref(path).once("value").then(snap => {
    document.getElementById("output").textContent =
      JSON.stringify(snap.val(), null, 2);
  });
}

// ==============================
// ADD COINS TO USER
// ==============================
function addCoins() {
  const uid = document.getElementById("uid").value.trim();
  const amount = Number(document.getElementById("addAmount").value.trim());

  if (!uid) return alert("Enter user Telegram ID");
  if (!amount) return alert("Enter coin amount");

  const path = "users/" + uid + "/coins";
  const ref = db.ref(path);

  ref.once("value").then(snap => {
    const current = snap.val() || 0;
    const newBalance = current + amount;

    ref.set(newBalance);

    document.getElementById("output").textContent =
      "Added " + amount + " coins to " + uid + 
      "\nNew Balance: " + newBalance;
  });
}
</script>

</body>
</html>
