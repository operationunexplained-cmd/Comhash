<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    button { padding: 10px 16px; margin: 10px 0; cursor: pointer; }
    #output { white-space: pre; background:#eee; padding:15px; margin-top:10px; border-radius:5px; }
    #panel { display:none; }
  </style>
</head>
<body>

<h2>Admin Panel</h2>

<input id="adminPass" type="password" placeholder="Enter admin password" style="padding:10px;">
<button onclick="login()">Login</button>

<div id="panel">
  <button onclick="loadUsers()">Load All Users</button>
  <button onclick="addCoins()">Add Coins</button>

  <div id="output">Waiting...</div>
</div>

<!-- Firebase v8 (Only version that works everywhere) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
// ==============================
// FIREBASE CONFIG
// ==============================
const firebaseConfig = {
  apiKey: "AIzaSyBDovmAk88JUEjeY35T-3eIta1igiE5fQ0",
  authDomain: "comhashgame.firebaseapp.com",
  databaseURL: "https://comhashgame-default-rtdb.firebaseio.com",
  projectId: "comhashgame",
  storageBucket: "comhashgame.firebasestorage.app",
  messagingSenderId: "392187080052",
  appId: "1:392187080052:web:3e31391442ca1315dc1021",
  measurementId: "G-0YWTXYJ7RN"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ==============================
// ADMIN PASSWORD
// ==============================
const ADMIN_PASSWORD = "superadmin123"; // change this

// ==============================
// LOGIN
// ==============================
function login() {
  const pass = document.getElementById("adminPass").value;
  if (pass !== ADMIN_PASSWORD) return alert("Wrong password");
  document.getElementById("panel").style.display = "block";
}

// ==============================
// LOAD ALL USERS
// ==============================
function loadUsers() {
  document.getElementById("output").textContent = "Loading...";

  db.ref("users").once("value")
    .then(snapshot => {
      document.getElementById("output").textContent =
        JSON.stringify(snapshot.val(), null, 2);
    })
    .catch(err => {
      document.getElementById("output").textContent = "Error: " + err.message;
    });
}

// ==============================
// ADD COINS
// ==============================
function addCoins() {
  const uid = prompt("Enter Telegram User ID:");
  const amount = Number(prompt("Enter coins to add:"));

  if (!uid || !amount) {
    alert("Both fields required");
    return;
  }

  const ref = db.ref("users/" + uid + "/coins");

  ref.once("value").then(snap => {
    const current = snap.val() || 0;
    const newBalance = current + amount;

    ref.set(newBalance);

    document.getElementById("output").textContent =
      "Added " + amount + " coins to " + uid +
      "\nNew Balance: " + newBalance;
  });
}
</script>

</body>
</html>
